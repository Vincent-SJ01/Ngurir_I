"use strict";(self["webpackChunkfront_end_revis"]=self["webpackChunkfront_end_revis"]||[]).push([[60],{8060:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var n=function(){var t=this,e=t._self._c;return e("v-main",{staticClass:"list"},[e("v-card",[e("v-list-item",[e("v-list-item-avatar",[e("img",{attrs:{src:"https://thumbs.dreamstime.com/b/cute-panda-bear-cartoon-chef-vector-cooking-cookie-sweet-bakery-cute-panda-bear-cartoon-chef-vector-cooking-cookie-sweet-bakery-216614619.jpg",alt:"John"}})]),e("v-list-item-content",[e("v-list-item-title",{staticClass:"headline"},[t._v(" Pengantaran ")]),e("v-list-item-subtitle",[t._v("By Ngurir")])],1)],1),e("v-card-title",[e("v-text-field",{staticStyle:{"margin-top":"30px"},attrs:{"append-icon":"mdi-magnify",label:"Search",outlined:"",hide:"",details:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("v-spacer")],1)],1),e("v-card",[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.dataPengantaran,search:t.search,"item-key":"created_at",loading:t.loadingState},scopedSlots:t._u([{key:"item.status.namaStatus",fn:function({item:a}){return[e("v-card",{class:t.getColorClass(a.idStatus),attrs:{large:"",label:"",width:"100px"}},[t._v(" "+t._s(a.status.namaStatus)+" ")])]}},{key:"item.actions",fn:function({item:a}){return[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",small:"",color:"success",disabled:t.disableDelivery(a.idStatus)},on:{click:function(e){return t.deliveryPaket(a)}}},[e("v-icon",[t._v(" mdi-truck-delivery ")])],1)]}}],null,!0)})],1),e("v-dialog",{attrs:{transition:"dialog-top-transition",persistent:"","max-width":"600px"},model:{value:t.dialogDelivery,callback:function(e){t.dialogDelivery=e},expression:"dialogDelivery"}},[e("v-card",[e("v-toolbar",{staticClass:"headline",attrs:{color:"brown darken-1",dark:""}},[t._v(" Mengantar paket ")]),e("v-card-text",{staticClass:"mt-5 mb-0 pb-0"},[e("v-container",{staticClass:"pb-0"},[e("v-text-field",{staticClass:"mb-0 mt-5",attrs:{label:"Keterangan",outlined:"",dense:"",clearable:"",required:""},model:{value:t.formInput.keterangan,callback:function(e){t.$set(t.formInput,"keterangan",e)},expression:"formInput.keterangan"}}),e("v-radio-group",{attrs:{row:""},model:{value:t.formInput.idStatus,callback:function(e){t.$set(t.formInput,"idStatus",e)},expression:"formInput.idStatus"}},[e("v-radio",{attrs:{label:"Gagal",value:"0"}}),e("v-radio",{attrs:{label:"Berhasil",value:"1"}})],1)],1)],1),e("v-card-actions",{staticClass:"mt-0"},[e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cancelConfirmation()}}},[t._v(" Cancel ")]),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.confirmDelivery()}}},[t._v(" Save ")])],1)],1)],1),e("v-snackbar",{attrs:{timeout:t.snackbarTimeout,"auto-height":"","multi-line":"",top:"",right:"",color:t.snackbarOption.color},model:{value:t.snackbarState,callback:function(e){t.snackbarState=e},expression:"snackbarState"}},[e("v-layout",{attrs:{"align-center":"","pr-4":""}},[e("v-icon",{staticClass:"pr-3",attrs:{dark:"",large:""}},[t._v(t._s(t.snackbarOption.icon))]),e("v-layout",{attrs:{column:""}},[e("div",[e("strong",[t._v(t._s(t.snackbarOption.title))])]),e("div",t._l(t.snackbarOption.text,(function(a,n){return e("span",{key:n},[t._v(" "+t._s(a)+" "),e("br")])})),0)])],1)],1)],1)},r=[],i=a(4311),s=a(9895),l=a(2179);let o=l.$1("token"),c={headers:{Authorization:"Bearer "+o}};var u={name:"PengantaranList",data(){return{dataPengantaran:[],tempObject:{},formInput:{},loadingState:!0,dialogDelivery:!1,snackbarState:!1,snackbarTimeout:3e3,snackbarOption:{color:null,icon:null,title:null,text:[]},search:null,headers:[{text:"No Resi",sortable:!0,value:"noResi"},{text:"Drop Point",sortable:!0,value:"drop_point.namaDropPoint"},{text:"Alamat",value:"paket.alamatTujuan"},{text:"Status",value:"status.namaStatus"},{text:"Keterangan",value:"keterangan"},{text:"Actions",value:"actions",align:"center",sortable:!1}]}},mounted(){this.getDataPengantaran()},methods:{getDataPengantaran(){this.setLoading(!0),i.Z.get(s.N+"pengantaranbykurir",c).then((t=>{console.log(t.data.data),this.dataPengantaran=t.data.data,this.setLoading(!1)})).catch((t=>{let e={color:"error",icon:"mdi-alert-circle",title:"Error",text:["Gagal Mengambil Data Pengantaran",`Code Error : ${t.response.status}`]};this.openSnackbar(e),this.setLoading(!1)}))},setLoading(t){this.loadingState=t},closeDialog(){this.dialogDelivery=!1,this.resetForm()},deliveryPaket(t){this.tempObject=t,this.dialogDelivery=!0},resetForm(){this.formInput={}},openSnackbar(t=null){this.snackbarState=!0,this.snackbarOption=t},cancelConfirmation(){this.dialogDelivery=!1,this.closeDialog()},confirmDelivery(){let t={idStatus:this.formInput.idStatus,keterangan:this.formInput.keterangan},e=this.tempObject.created_at.split("T");e[1]=e[1].substring(0,8);let a=e[0].split("-"),n=e[1].split(":"),r=new Date(a[0],a[1]-1,a[2],n[0],n[1],n[2],0);r.setHours(r.getHours()+7);var l=6e4*(new Date).getTimezoneOffset();let o=new Date(r-l).toISOString().slice(0,19).replace("T"," ");i.Z.put(s.N+`updatestatuspengantaran/${this.tempObject.noResi}_${o}`,t,c).then((()=>{let t={color:"success",icon:"mdi-check",title:"Success",text:["Berhasil Melakukan Tindakan Pengantaran!"]};this.openSnackbar(t),this.closeDialog(),this.getDataPengantaran()})).catch((t=>{let e={color:"error",icon:"mdi-alert-circle",title:"Error",text:["Gagal Mengirim Paket",`Code Error : ${t.response.status}`]};this.openSnackbar(e),this.closeDialog()}));let u=this.tempObject.paket,d="0"==this.formInput.idStatus.toString()?1:2==u.idStatus||7==u.idStatus?3:5;console.log(d);let g={idStatus:d};i.Z.put(s.N+`updatestatuspaket/${this.tempObject.noResi}`,g,c).then((t=>{console.log(t)})).catch((t=>{console.log(t);let e={color:"error",icon:"mdi-alert-circle",title:"Error",text:["Gagal Mengubah Data Paket!",`Code Error : ${t.response.status}`]};this.openSnackbar(e)}))},disableDelivery(t){return"2"!=t},getColorClass(t){switch(t){case"0":return"red lighten-1 text-center pa-1";case"1":return"green lighten-1 text-center pa-1";case"2":return"blue lighten-1 text-center pa-1"}}}},d=u,g=a(1001),p=(0,g.Z)(d,n,r,!1,null,null,null),m=p.exports},2179:function(t,e,a){a.d(e,{$1:function(){return r},Bt:function(){return i},lE:function(){return n}});const n=(t,e,a)=>{let n="";if(a){let t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3),n="; expires="+t.toUTCString()}document.cookie=t+"="+(e||"")+n+"; path=/"},r=t=>{let e=t+"=",a=document.cookie.split(";");for(let n=0;n<a.length;n++){let t=a[n];while(" "==t.charAt(0))t=t.substring(1,t.length);if(0==t.indexOf(e))return t.substring(e.length,t.length)}return null},i=()=>{let t=document.cookie.split(";");for(let e=0;e<t.length;e++){let a=t[e],n=a.indexOf("="),r=n>-1?a.substr(0,n):a;document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}}}]);
//# sourceMappingURL=60.bb0e1691.js.map